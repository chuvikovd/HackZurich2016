{"version":3,"sources":["map.component.ts"],"names":[],"mappings":"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","file":"map.component.js","sourcesContent":["import { Component, OnInit } from 'angular2/core';\r\nimport { Message } from '../models/Message'\r\nimport { ChatService } from './chat.service';\r\n\r\n@Component({\r\n    selector: \"map\",\r\n    //providers: [ChatService],\r\n    template: `\r\n    <div class=\"map-container\">\r\n        <div id=\"map\">\r\n      \r\n        </div>\r\n    </div>\r\n  `\r\n})\r\n\r\nexport class MapComponent implements OnInit {\r\n\r\n    mapDiv;\r\n    map;\r\n\r\n    constructor(private _chatService: ChatService) {\r\n\r\n        _chatService.getMessage$.subscribe(message => {\r\n            console.log(\"PREVIEW \" + message.body + message.user.lat + message.user.long);\r\n            customMarker(this.map, new Position(message.user.lat, message.user.long), message.body);\r\n        });\r\n    }\r\n\r\n    ngOnInit(){\r\n        this.mapDiv = document.getElementById(\"map\");\r\n        this.map = new google.maps.Map(this.mapDiv, {\r\n            center: new Position(this._chatService.user.lat, this._chatService.user.long),\r\n            zoom: 15\r\n        });\r\n\r\n        /*this.infoWindow = new google.maps.InfoWindow({map: this.map});\r\n        this.infoWindow.setContent('Location found.');*/\r\n        //customMarker(this.map, new Position(this.messages[0].lat, this.messages[0].lng));\r\n        //customMarker(this.map, new Position(42.9837, -81.2497), \"azaza\");\r\n    }\r\n\r\n}\r\n\r\nCustomMarker.prototype = new google.maps.OverlayView();\r\n\r\nfunction CustomMarker(opts) {\r\n    this.setValues(opts);\r\n    this.deleted = false;\r\n}\r\n\r\nCustomMarker.prototype.draw = function() {\r\n    if(this.deleted) return;\r\n    var self = this;\r\n    var div = this.div;\r\n\r\n\r\n    if (!div) {\r\n        div = this.div = $('' +\r\n            '<div>' +\r\n            '<div class=\"shadow\"></div>' +\r\n            '<div class=\"pulse\"></div>' +\r\n            '<div class=\"pin-wrap\">' +\r\n                '<div class=\"pin\">' +\r\n                    '<div class=\"content\">' +\r\n                        '<span class=\"author\">Dmitrijs:</span>' +\r\n                        '<p>' + this.data + '</p>' +\r\n                    '</div>' +\r\n                '</div>' +\r\n            '</div>' +\r\n            '</div>' +\r\n            '')[0];\r\n        this.pinWrap = this.div.getElementsByClassName('pin-wrap');\r\n        this.pin = this.div.getElementsByClassName('pin');\r\n        this.pinShadow = this.div.getElementsByClassName('shadow');\r\n        div.style.position = 'absolute';\r\n        div.style.cursor = 'pointer';\r\n        var panes = this.getPanes();\r\n        panes.overlayImage.appendChild(div);\r\n        google.maps.event.addDomListener(div, \"click\", function(event) {\r\n            google.maps.event.trigger(self, \"click\", event);\r\n        });\r\n    }\r\n    var point = this.getProjection().fromLatLngToDivPixel(this.position);\r\n    if (point) {\r\n        div.style.left = point.x + 'px';\r\n        div.style.top = point.y + 'px';\r\n    }\r\n};\r\n\r\nCustomMarker.prototype.remove = function() {\r\n    if (this.div) {\r\n        this.div.parentNode.removeChild(this.div);\r\n        this.div = null;\r\n    }\r\n    this.deleted = true;\r\n};\r\n\r\nvar customMarker = function(map, pos, data) {\r\n\r\n    var marker = new CustomMarker({\r\n        position: pos,\r\n        map: map,\r\n        data: data\r\n    });\r\n\r\n    setTimeout(() => {\r\n        marker.remove();\r\n        marker.div = null;\r\n    }, 5000);\r\n\r\n};\r\n\r\nlet Position = google.maps.LatLng;"],"sourceRoot":"/source/"}